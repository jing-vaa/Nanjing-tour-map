<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å—äº¬å¤«å­åº™ç§¦æ·®æ²³æ™¯åŒºäº’åŠ¨æ¸¸è§ˆåœ°å›¾</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
        }
        
        #sidebar {
            width: 350px;
            background: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            overflow-y: auto;
            z-index: 1000;
        }
        
        #map {
            flex: 1;
            height: 100vh;
        }
        
        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .header h1 {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        .header p {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .route-section {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .route-section:hover {
            background: #f9f9f9;
        }
        
        .route-section.active {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        
        .section-number {
            background: #ff9800;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin-right: 10px;
        }
        
        .section-info {
            font-size: 13px;
            color: #666;
            line-height: 1.6;
            margin-left: 34px;
        }
        
        .attractions {
            margin-top: 10px;
            margin-left: 34px;
        }
        
        .attraction-item {
            font-size: 12px;
            color: #888;
            padding: 3px 0;
            display: flex;
            align-items: center;
        }
        
        .attraction-item::before {
            content: "â€¢";
            color: #ff9800;
            font-weight: bold;
            margin-right: 8px;
        }
        
        .tips {
            padding: 15px;
            background: #e3f2fd;
            margin: 15px;
            border-radius: 8px;
            font-size: 13px;
            color: #1976d2;
        }
        
        .tips h3 {
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .tips ul {
            list-style: none;
            padding-left: 0;
        }
        
        .tips li {
            padding: 3px 0;
        }
        
        .leaflet-popup-content-wrapper {
            border-radius: 8px;
        }
        
        .popup-content {
            max-width: 250px;
        }
        
        .popup-title {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .popup-info {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }
        
        .popup-price {
            color: #f5576c;
            font-weight: bold;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }
            
            #sidebar {
                width: 100%;
                height: 40vh;
            }
            
            #map {
                height: 60vh;
            }
        }
    </style>
</head>
<body>
    <div id="sidebar">
        <div class="header">
            <h1>ğŸ® å¤«å­åº™ç§¦æ·®æ²³æ¸¸è§ˆè·¯çº¿</h1>
            <p>äº²å­å‹å¥½Â·ä¸èµ°å›å¤´è·¯Â·ç¯ä¼šç²¾åç‰ˆ</p>
            <p style="margin-top: 5px; font-size: 11px;">æ€»è·ç¦»: 4.5å…¬é‡Œ | å»ºè®®æ—¶é•¿: 5.5-6å°æ—¶</p>
        </div>
        
        <div class="tips">
            <h3>ğŸ’¡ æ¸¸è§ˆæç¤º</h3>
            <ul>
                <li>ğŸ•’ æœ€ä½³å…¥å›­æ—¶é—´ï¼š15:00-16:00</li>
                <li>ğŸš‡ èµ·ç‚¹ï¼šåœ°é“3å·çº¿å¤«å­åº™ç«™2å·å£</li>
                <li>ğŸš‡ ç»ˆç‚¹ï¼šæ­¥è¡Œ5åˆ†é’Ÿåˆ°1å·çº¿ä¸­åé—¨ç«™</li>
                <li>ğŸ“± å…³æ³¨"ç§¦æ·®æ–‡æ—…"å…¬ä¼—å·è·å–æœ€æ–°ä¿¡æ¯</li>
            </ul>
        </div>
        
        <div class="route-section active" data-section="1">
            <div class="section-title">
                <span class="section-number">1</span>
                æ–‡è„‰å¯ç¨‹Â·å¤«å­åº™æ ¸å¿ƒåŒº
            </div>
            <div class="section-info">
                <div>ğŸ“ è·ç¦»: 1.2å…¬é‡Œ | â±ï¸ å»ºè®®åœç•™: 1.5å°æ—¶</div>
                <div class="attractions">
                    <div class="attraction-item">å¤§æˆæ®¿ (é—¨ç¥¨30å…ƒ)</div>
                    <div class="attraction-item">æ±Ÿå—è´¡é™¢ & ç§‘ä¸¾åšç‰©é¦† (é—¨ç¥¨50å…ƒ)</div>
                    <div class="attraction-item">æ³®æ± ç å¤´</div>
                </div>
            </div>
        </div>
        
        <div class="route-section" data-section="2">
            <div class="section-title">
                <span class="section-number">2</span>
                å…­æœé—éŸµÂ·ä¹Œè¡£å··&ç™½é¹­æ´²
            </div>
            <div class="section-info">
                <div>ğŸ“ è·ç¦»: 1.3å…¬é‡Œ | â±ï¸ å»ºè®®åœç•™: 1-1.5å°æ—¶</div>
                <div class="attractions">
                    <div class="attraction-item">ä¹Œè¡£å·· (å…è´¹)</div>
                    <div class="attraction-item">æ–‡å¾·æ¡¥ (è“è°ƒæ—¶åˆ»æ‹æ‘„æœ€ä½³)</div>
                    <div class="attraction-item">ç™½é¹­æ´²å…¬å›­ (æ°´å¹•æ¿€å…‰ç§€19:00/20:00)</div>
                </div>
            </div>
        </div>
        
        <div class="route-section" data-section="3">
            <div class="section-title">
                <span class="section-number">3</span>
                å¸‚äº•çƒŸç«Â·è€é—¨ä¸œæ·±åº¦æ¸¸
            </div>
            <div class="section-info">
                <div>ğŸ“ è·ç¦»: 2.0å…¬é‡Œ | â±ï¸ å»ºè®®åœç•™: 1.5-2å°æ—¶</div>
                <div class="attractions">
                    <div class="attraction-item">è€é—¨ä¸œä¸»è¡— (ç¾é£Ÿé›†ä¸­)</div>
                    <div class="attraction-item">å…ˆé”‹ä¹¦åº— (äºŒæ¥¼éœ²å°)</div>
                    <div class="attraction-item">éé—ä½“éªŒ (é‡‘é™µåˆ»ç»ã€äº‘é”¦å°ç»‡æœº)</div>
                    <div class="attraction-item">æ˜åŸå¢™ä¸­åé—¨æ®µ (é—¨ç¥¨50å…ƒ)</div>
                </div>
            </div>
        </div>
        
        <div class="tips">
            <h3>ğŸª äº²å­å‹å¥½ç‰¹è‰²</h3>
            <ul>
                <li>ğŸ¯ ç§‘ä¸¾VRä½“éªŒã€éé—DIY</li>
                <li>ğŸ¯ é›†ç« æ‰“å¡æ¢æ–‡åˆ›</li>
                <li>ğŸ¯ è€é—¨ä¸œå°åƒä¸€æ¡è¡—</li>
                <li>ğŸ¯ æ¨è½¦å¯è¿›ç™½é¹­æ´²å’Œè€é—¨ä¸œ</li>
            </ul>
        </div>
    </div>
    
    <div id="map"></div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // åˆå§‹åŒ–åœ°å›¾
        const map = L.map('map').setView([32.028, 118.785], 15);
        
        // æ·»åŠ åœ°å›¾åº•å›¾
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            maxZoom: 19
        }).addTo(map);
        
        // å®šä¹‰æ™¯ç‚¹æ•°æ®
        const attractions = [
            {
                id: 'start',
                name: 'å¤«å­åº™ä¸œç‰ŒåŠ',
                coords: [32.0302, 118.7850],
                section: 1,
                info: 'æ¸¸è§ˆèµ·ç‚¹ï¼Œå¤©ä¸‹æ–‡æ¢ç‰ŒåŠæ‰€åœ¨åœ°',
                price: 'å…è´¹'
            },
            {
                id: 'dachengdian',
                name: 'å¤§æˆæ®¿',
                coords: [32.0300, 118.7845],
                section: 1,
                info: 'å­”å­åƒã€ç¼–é’Ÿè¡¨æ¼”ï¼Œå­©å­å¯æŒ‚ç¥ˆç¦ç‰Œ',
                price: 'é—¨ç¥¨30å…ƒ'
            },
            {
                id: 'keju',
                name: 'æ±Ÿå—è´¡é™¢ & ä¸­å›½ç§‘ä¸¾åšç‰©é¦†',
                coords: [32.0295, 118.7840],
                section: 1,
                info: 'åœ°ä¸‹å››å±‚æ²‰æµ¸å¼ä½“éªŒï¼Œå·èˆVRä½“éªŒã€é‡‘æ¦œé¢˜åå±•åŒº',
                price: 'é—¨ç¥¨50å…ƒ'
            },
            {
                id: 'panchi',
                name: 'æ³®æ± ç å¤´',
                coords: [32.0290, 118.7835],
                section: 1,
                info: 'ç§¦æ·®æ²³ç•”ï¼Œå¯ä¹˜èˆ¹æ¸¸è§ˆ',
                price: 'å…è´¹'
            },
            {
                id: 'wuyixiang',
                name: 'ä¹Œè¡£å··',
                coords: [32.0285, 118.7842],
                section: 2,
                info: 'â€œæ—§æ—¶ç‹è°¢å ‚å‰ç‡•â€è¯—ç¢‘æ‰“å¡åœ°',
                price: 'å…è´¹'
            },
            {
                id: 'wendeqiao',
                name: 'æ–‡å¾·æ¡¥',
                coords: [32.0280, 118.7848],
                section: 2,
                info: 'ç»å…¸æœºä½ï¼Œæ‹ç§¦æ·®æ²³åŒæ¡¥å€’å½±ï¼Œè“è°ƒæ—¶åˆ»æœ€ä½³',
                price: 'å…è´¹'
            },
            {
                id: 'bailuzhou',
                name: 'ç™½é¹­æ´²å…¬å›­',
                coords: [32.0270, 118.7855],
                section: 2,
                info: 'â€œé‡‘é™µåäºŒé’—â€èŠ±ç¯ï¼Œæ°´å¹•æ¿€å…‰ç§€(19:00/20:00)',
                price: 'å…è´¹'
            },
            {
                id: 'laomendong',
                name: 'è€é—¨ä¸œä¸»è¡—',
                coords: [32.0255, 118.7850],
                section: 3,
                info: 'ç¾é£Ÿé›†ä¸­åœ°ï¼šå°éƒ‘é…¥çƒ§é¥¼ã€é™†æ°æ¢…èŠ±ç³•ã€è“è€å¤§ç³–ç²¥è—•',
                price: 'ç¾é£Ÿè‡ªç†'
            },
            {
                id: 'xianfeng',
                name: 'å…ˆé”‹ä¹¦åº—',
                coords: [32.0250, 118.7852],
                section: 3,
                info: 'äºŒæ¥¼éœ²å°å¯æ‹é’ç –é»›ç“¦',
                price: 'å…è´¹'
            },
            {
                id: 'feiyi',
                name: 'éé—ä½“éªŒåŒº',
                coords: [32.0245, 118.7850],
                section: 3,
                info: 'é‡‘é™µåˆ»ç»ã€äº‘é”¦å°ç»‡æœº(äº²å­äº’åŠ¨)ï¼Œå¯»å…‰ä¹‹æ—…é›†ç« æ‰“å¡',
                price: 'ä½“éªŒé¡¹ç›®æ”¶è´¹'
            },
            {
                id: 'qiang',
                name: 'æ˜åŸå¢™ï¼ˆä¸­åé—¨æ®µï¼‰',
                coords: [32.0230, 118.7855],
                section: 3,
                info: 'ä¿¯ç°ç§¦æ·®æ²³+è€åŸå—å¤œæ™¯ï¼Œè§†é‡æ— æ•Œ',
                price: 'é—¨ç¥¨50å…ƒ'
            },
            {
                id: 'end',
                name: 'è€é—¨ä¸œå—å£ï¼ˆç»ˆç‚¹ï¼‰',
                coords: [32.0225, 118.7860],
                section: 3,
                info: 'æ¸¸è§ˆç»“æŸï¼Œæ­¥è¡Œ5åˆ†é’Ÿåˆ°åœ°é“1å·çº¿ä¸­åé—¨ç«™',
                price: 'å…è´¹'
            }
        ];
        
        // å®šä¹‰è·¯çº¿æ®µ
        const routeSegments = [
            {
                section: 1,
                coords: [
                    [32.0302, 118.7850],
                    [32.0300, 118.7845],
                    [32.0295, 118.7840],
                    [32.0290, 118.7835]
                ],
                color: '#ff9800'
            },
            {
                section: 2,
                coords: [
                    [32.0290, 118.7835],
                    [32.0285, 118.7842],
                    [32.0280, 118.7848],
                    [32.0270, 118.7855]
                ],
                color: '#4caf50'
            },
            {
                section: 3,
                coords: [
                    [32.0270, 118.7855],
                    [32.0255, 118.7850],
                    [32.0250, 118.7852],
                    [32.0245, 118.7850],
                    [32.0230, 118.7855],
                    [32.0225, 118.7860]
                ],
                color: '#2196f3'
            }
        ];
        
        // æ·»åŠ è·¯çº¿åˆ°åœ°å›¾
        const routeLayers = {};
        routeSegments.forEach(segment => {
            const polyline = L.polyline(segment.coords, {
                color: segment.color,
                weight: 5,
                opacity: 0.8,
                dashArray: '10, 5'
            }).addTo(map);
            
            routeLayers[segment.section] = polyline;
        });
        
        // æ·»åŠ æ™¯ç‚¹æ ‡è®°
        const markers = {};
        attractions.forEach(attraction => {
            const icon = L.divIcon({
                html: `<div style="background: ${routeSegments[attraction.section-1].color}; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 12px; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);">${attraction.section}</div>`,
                iconSize: [30, 30],
                iconAnchor: [15, 15],
                className: 'custom-marker'
            });
            
            const marker = L.marker(attraction.coords, { icon: icon })
                .addTo(map)
                .bindPopup(`
                    <div class="popup-content">
                        <div class="popup-title">${attraction.name}</div>
                        <div class="popup-info">${attraction.info}</div>
                        <div class="popup-price">${attraction.price}</div>
                    </div>
                `);
            
            markers[attraction.id] = marker;
        });
        
        // ä¾§è¾¹æ äº¤äº’
        document.querySelectorAll('.route-section').forEach(section => {
            section.addEventListener('click', function() {
                // ç§»é™¤æ‰€æœ‰activeç±»
                document.querySelectorAll('.route-section').forEach(s => s.classList.remove('active'));
                // æ·»åŠ activeç±»åˆ°å½“å‰é¡¹
                this.classList.add('active');
                
                // è·å–è·¯æ®µå·
                const sectionNum = parseInt(this.dataset.section);
                
                // èšç„¦åˆ°å¯¹åº”è·¯çº¿
                if (routeLayers[sectionNum]) {
                    map.fitBounds(routeLayers[sectionNum].getBounds(), {
                        padding: [20, 20]
                    });
                }
                
                // é«˜äº®æ˜¾ç¤ºè¯¥è·¯æ®µçš„æ ‡è®°
                Object.values(markers).forEach(marker => marker.setOpacity(0.3));
                attractions
                    .filter(a => a.section === sectionNum)
                    .forEach(a => markers[a.id].setOpacity(1));
            });
        });
        
        // åˆå§‹èšç„¦åˆ°æ•´ä¸ªè·¯çº¿
        const allCoords = attractions.map(a => a.coords);
        map.fitBounds(allCoords, {
            padding: [20, 20]
        });
        
        // æ·»åŠ æ¯”ä¾‹å°º
        L.control.scale({ position: 'bottomright' }).addTo(map);
        
        // æ·»åŠ å›¾ä¾‹
        const legend = L.control({ position: 'bottomleft' });
        legend.onAdd = function(map) {
            const div = L.DomUtil.create('div', 'legend');
            div.style.background = 'white';
            div.style.padding = '10px';
            div.style.borderRadius = '5px';
            div.style.boxShadow = '0 1px 5px rgba(0,0,0,0.1)';
            div.innerHTML = `
                <div style="font-size: 12px; font-weight: bold; margin-bottom: 5px;">è·¯çº¿å›¾ä¾‹</div>
                <div style="font-size: 11px;">
                    <div style="display: flex; align-items: center; margin-bottom: 3px;">
                        <div style="width: 20px; height: 3px; background: #ff9800; margin-right: 5px;"></div>
                        ç¬¬ä¸€æ®µ: å¤«å­åº™æ ¸å¿ƒåŒº
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: 3px;">
                        <div style="width: 20px; height: 3px; background: #4caf50; margin-right: 5px;"></div>
                        ç¬¬äºŒæ®µ: ä¹Œè¡£å··&ç™½é¹­æ´²
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div style="width: 20px; height: 3px; background: #2196f3; margin-right: 5px;"></div>
                        ç¬¬ä¸‰æ®µ: è€é—¨ä¸œæ·±åº¦æ¸¸
                    </div>
                </div>
            `;
            return div;
        };
        legend.addTo(map);
    </script>
</body>
</html>
